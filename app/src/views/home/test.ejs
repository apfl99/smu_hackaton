<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMU Hackathon</title>
    <!-- Favicon -->
    <link rel="shortcut icon" href="images/favicon/favicon.ico">
    <link rel="apple-touch-icon" sizes="144x144" type="image/x-icon" href="images/favicon/apple-touch-icon.png">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/toggle.css">
    <link rel="stylesheet" href="/css/test.css">

    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.1/css/all.min.css'>
    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Montserrat&amp;display=swap"rel="stylesheet'>
    <link rel="stylesheet" href="/css/slider.css">

    <!-- All CSS Plugins -->
    <link rel="stylesheet" type="text/css" href="css/plugin.css">
</head>

<body style="background-color: black;">
    <!-- Home & Menu Section Start -->
    <header id="home" class="home-section">
        <div class="header-top-area">
            <div class="container">
                <div class="row">
                  <!-- 여기가 로고랑 메뉴 사이 벌리기 클수록 많이 벌어짐-->
                    <div class="col-sm-6">
                        <div class="logo">
                            <!--<a href="/">Rolling</a>-->
                            <a href="/"><img src="/img/logo.png" style="width: 50px; height:30px"></a>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="navigation-menu">
                            <div class="navbar">
                                <div class="navbar-collapse collapse">
                                    <ul class="nav navbar-nav me-auto">
                                        <li class="nav-item"><a id="menu" style="color: #15FFFF" href="#home">Home <div class="ripple-wrapper"></div></a>
                                        </li>
                                        <li style="display: none;" id="mypage_menu"><a id="menu" style="color: #E0FB60;" href="#">MyList</a>
                                        </li>
                                        <li id="login_menu" class="nav-item"><a id="menu" style="color: #E0FB60;" href="login">Login</a>
                                        </li>
                                        <li id="signup_menu"><a id="menu" style="color: #E0FB60;" href="register">Sign up</a>
                                        </li>
                                        <li style="display: none;" id="logout_menu"><a id="menu" style="color: #E0FB60;">Logout</a>
                                        </li>
                                        <li>
                                            <input type="checkbox" id="toggle" hidden> 
                                                <label for="toggle" class="toggleSwitch" style="border:2px solid #15FFFF">
                                                    <span class="toggleButton"></span>
                                                </label>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <script>
        
    </script>
    <!--start-->
    <div class="app">
        <div class="cardList">
            <button class="cardList__btn btn btn--left">
                <div class="icon">
                    <svg>
                        <use xlink:href="#arrow-left"></use>
                    </svg>
                </div>
            </button>
    
            <div class="cards__wrapper">
                <div class="card current--card">
                    <div class="card__image">
                        <img src="https://source.unsplash.com/Z8dtTatMVMw" alt="" />
                    </div>
                </div>

                <div class="card next--card">
                    <div class="card__image">
                        <img src="https://source.unsplash.com/9dmycbFE7mQ" alt="" />
                    </div>
                </div>
    
                <div class="card previous--card">
                    <div class="card__image">
                        <img src="https://source.unsplash.com/m7K4KzL5aQ8" alt="" />
                    </div>
                </div>
            </div>
    
            <button class="cardList__btn btn btn--right">
                <div class="icon">
                    <svg>
                        <use xlink:href="#arrow-right"></use>
                    </svg>
                </div>
            </button>
        </div>
        <div class="infoList">
            <div class="info__wrapper">
                <div class="info current--info">
                    <h1 class="text name"><%=results[0].title%></h1>
                    <h4 class="text location"><%=results[0].singer%></h4>
                    <p class="text description"><%=results[0].tags%></p>
                </div>
    
                <div class="info next--info">
                    <h1 class="text name">Machu Pichu</h1>
                    <h4 class="text location">Peru</h4>
                    <p class="text description">Adventure is never far away</p>
                </div>
    
                <div class="info previous--info">
                    <h1 class="text name">Chamonix</h1>
                    <h4 class="text location">France</h4>
                    <p class="text description">Let your dreams come true</p>
                </div>
            </div>
        </div>
    
    
        <div class="app__bg">
            <div class="app__bg__image current--image">
                <img src="https://source.unsplash.com/Z8dtTatMVMw" alt="" />
            </div>
            <div class="app__bg__image next--image">
                <img src="https://source.unsplash.com/9dmycbFE7mQ" alt="" />
            </div>
            <div class="app__bg__image previous--image">
                <img src="https://source.unsplash.com/m7K4KzL5aQ8" alt="" />
            </div>
        </div>
        
    </div>
    
    <div class="loading__wrapper">
        <div class="loader--text">Loading...</div>
        <div class="loader">
            <span></span>
        </div>
    </div>
    
    
    <svg class="icons" style="display: none;">
        <symbol id="arrow-left" xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'>
            <polyline points='328 112 184 256 328 400'
                         style='fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:48px' />
        </symbol>
        <symbol id="arrow-right" xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'>
            <polyline points='184 112 328 256 184 400'
                         style='fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:48px' />
        </symbol>
    </svg>

           <div class="support" id = "movieListCtrlID" ng-controller="movieListController">    
               <button id="playBtn" ng-click="play()"><img src="/img/play.png"></button>
           </div>          


    <!--end-->
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.6.0/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.6.0/ScrollTrigger.min.js"></script>
<script src="/lib/jquery/dist/jquery.js"></script>
<script src="/lib/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/lib/wow/dist/wow.js"></script>
<script src="/lib/jquery.mb.ytplayer/dist/jquery.mb.YTPlayer.js"></script>
<script src="/lib/isotope/dist/isotope.pkgd.js"></script>
<script src="/lib/imagesloaded/imagesloaded.pkgd.js"></script>
<script src="/lib/flexslider/jquery.flexslider.js"></script>
<script src="/lib/owl.carousel/dist/owl.carousel.min.js"></script>
<script src="/lib/magnific-popup/dist/jquery.magnific-popup.js"></script>
<script src="/lib/simple-text-rotator/jquery.simple-text-rotator.min.js"></script>

<script src='https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/gsap/3.3.3/gsap.min.js'></script><script  src="/js/home/slide.js"></script>

<!-- All Javascript Plugins  -->
<script src="js/home/plugins.js"></script>

<!-- Main Javascript File  -->
<script src="js/home/main.js"></script>

<script>
        
    var player = null;
    var options =
        {
            width: "0",              
            height: "0",             
            videoId: "<%=results[0].video_id%>",  
            playerVars: {
                autoplay: 1,
                controls: 0 ,
                autohide: 1,
                html5: 1
            },
            events: {
                onReady: onPlayerReady,
                onStateChange: onPlayerStateChange
            }
        };
    //iframe api
    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    function onYouTubeIframeAPIReady() {
        player = new YT.Player( 'player', options );  
    }
    function onPlayerReady(event) {
        player.playVideo();
    }
    function onPlayerStateChange(event) {
        
        if(event.data == YT.PlayerState.ENDED) {
            var scope = angular.element(document.getElementById("movieListCtrlID")).scope();
            
            scope.$apply(function () {
                scope.playNextMovie();
            }); 
        }
    }
    angular.module('movieListApp', [])
    .controller('movieListController', function ($scope) {
        var movieInfo;
        $scope.index = 0;
        $scope.isRepeat = false;
    
    //수정할 부분
        $scope.movies = [
            {"song_id": "<%=results[0].sing_id%>", "video_id": "<%=results[0].video_id%>", "movieTitle": "<%=results[0].title%>"},
            {"song_id": "<%=results[1].sing_id%>", "video_id": "<%=results[1].video_id%>", "movieTitle": "<%=results[1].title%>"},
            {"song_id": "<%=results[2].sing_id%>", "video_id": "<%=results[2].video_id%>", "movieTitle": "<%=results[2].title%>"},
            {"song_id": "<%=results[3].sing_id%>", "video_id": "<%=results[3].video_id%>", "movieTitle": "<%=results[3].title%>"},
            {"song_id": "<%=results[4].sing_id%>", "video_id": "<%=results[4].video_id%>", "movieTitle": "<%=results[4].title%>"},
            {"song_id": "<%=results[5].sing_id%>", "video_id": "<%=results[5].video_id%>", "movieTitle": "<%=results[5].title%>"},
            {"song_id": "<%=results[6].sing_id%>", "video_id": "<%=results[6].video_id%>", "movieTitle": "<%=results[6].title%>"},
            {"song_id": "<%=results[7].sing_id%>", "video_id": "<%=results[7].video_id%>", "movieTitle": "<%=results[7].title%>"},
            {"song_id": "<%=results[8].sing_id%>", "video_id": "<%=results[8].video_id%>", "movieTitle": "<%=results[8].title%>"},
            {"song_id": "<%=results[9].sing_id%>", "video_id": "<%=results[9].video_id%>", "movieTitle": "<%=results[9].title%>"},
            // {"song_id": "<%=results[10].sing_id%>", "video_id": "<%=results[10].video_id%>", "movieTitle": "<%=results[10].title%>"},
            // {"song_id": "<%=results[11].sing_id%>", "video_id": "<%=results[11].video_id%>", "movieTitle": "<%=results[11].title%>"},
            // {"song_id": "<%=results[12].sing_id%>", "video_id": "<%=results[12].video_id%>", "movieTitle": "<%=results[12].title%>"},
            // {"song_id": "<%=results[13].sing_id%>", "video_id": "<%=results[13].video_id%>", "movieTitle": "<%=results[13].title%>"},
            // {"song_id": "<%=results[14].sing_id%>", "video_id": "<%=results[14].video_id%>", "movieTitle": "<%=results[14].title%>"},
            // {"song_id": "<%=results[15].sing_id%>", "video_id": "<%=results[15].video_id%>", "movieTitle": "<%=results[15].title%>"},
            // {"song_id": "<%=results[16].sing_id%>", "video_id": "<%=results[16].video_id%>", "movieTitle": "<%=results[16].title%>"},
            // {"song_id": "<%=results[17].sing_id%>", "video_id": "<%=results[17].video_id%>", "movieTitle": "<%=results[17].title%>"},
            // {"song_id": "<%=results[18].sing_id%>", "video_id": "<%=results[18].video_id%>", "movieTitle": "<%=results[18].title%>"},
            // {"song_id": "<%=results[19].sing_id%>", "video_id": "<%=results[19].video_id%>", "movieTitle": "<%=results[19].title%>"},
            // {"song_id": "<%=results[20].sing_id%>", "video_id": "<%=results[20].video_id%>", "movieTitle": "<%=results[20].title%>"},
            // {"song_id": "<%=results[21].sing_id%>", "video_id": "<%=results[21].video_id%>", "movieTitle": "<%=results[21].title%>"},
            // {"song_id": "<%=results[22].sing_id%>", "video_id": "<%=results[22].video_id%>", "movieTitle": "<%=results[22].title%>"},
            // {"song_id": "<%=results[23].sing_id%>", "video_id": "<%=results[23].video_id%>", "movieTitle": "<%=results[23].title%>"},
            // {"song_id": "<%=results[24].sing_id%>", "video_id": "<%=results[24].video_id%>", "movieTitle": "<%=results[24].title%>"},
            // {"song_id": "<%=results[25].sing_id%>", "video_id": "<%=results[25].video_id%>", "movieTitle": "<%=results[25].title%>"},
            // {"song_id": "<%=results[26].sing_id%>", "video_id": "<%=results[26].video_id%>", "movieTitle": "<%=results[26].title%>"},
            // {"song_id": "<%=results[27].sing_id%>", "video_id": "<%=results[27].video_id%>", "movieTitle": "<%=results[27].title%>"},
            // {"song_id": "<%=results[28].sing_id%>", "video_id": "<%=results[28].video_id%>", "movieTitle": "<%=results[28].title%>"},
            // {"song_id": "<%=results[29].sing_id%>", "video_id": "<%=results[29].video_id%>", "movieTitle": "<%=results[29].title%>"},
        ];
        
        
        $scope.movie = $scope.movies[0];
        $scope.onSelectChange = function() {
            player.loadVideoById($scope.movie.video_id);
            $scope.index = $scope.movie.song_id;       
        };
    
        $scope.play = function() {
        player.playVideo();
        }
    
        $scope.pause = function() {
        player.pauseVideo();
        }
        $scope.previous = function() {
            if ($scope.index - 1 >= 0) {
                $scope.index = $scope.index - 1; 
                player.loadVideoById($scope.movies[$scope.index].video_id);
                $scope.movie = $scope.movies[$scope.index];
    
            } else if ( ($scope.index - 1) < 0 && $scope.isRepeat) { 
                $scope.index = $scope.movies.length - 1;
                player.loadVideoById($scope.movies[$scope.index].video_id);
                $scope.movie = $scope.movies[$scope.index];
            }
        };
        
        $scope.forward = function() {
            if ($scope.index + 1 < $scope.movies.length) {
                $scope.index = $scope.index + 1;
                player.loadVideoById($scope.movies[$scope.index].video_id);
                $scope.movie = $scope.movies[$scope.index];
        
            } else if ( ( $scope.index + 1 ) == $scope.movies.length && $scope.isRepeat) {
                $scope.index =  0;
                player.loadVideoById($scope.movies[$scope.index].video_id);
                $scope.movie = $scope.movies[$scope.index];
            }
        };
        
    });
</script>

</body>
</html>
